I encountered a frustrating issue with AWS CodePipeline where I kept getting the error:


InvalidStructureException: CodePipeline is not authorized to perform AssumeRole on role arn:aws:iam::[your account number]:role/CodePipelineServiceRole
This made it seem like there was an issue with the IAM trust policy or the attached permissions. However, after hours of debugging, I found out that the real culprit was a missing CloudWatch Logs permission in my pipeline's IAM role.


The policy needed to include:


Edit

Solution:
Ensure your CodePipeline IAM Role has permissions for CloudWatch Logs if you're using custom logging.
If you encounter InvalidStructureException or not authorized to assume role, check if missing logging permissions are the root cause.
Hope this helps others avoid wasting time debugging misleading IAM errors!