{
  "Effect": "Allow",
  "Action": [
    "ec2:CreateFleet",
    "ec2:RunInstances",
    "ec2:CreateLaunchTemplate"
  ],
  "Resource": "*",
  "Condition": {
    "StringEquals": {
      "aws:RequestTag/eks:eks-cluster-name": "${aws:PrincipalTag/eks:eks-cluster-name}"
    },
    "StringLike": {
      "aws:RequestTag/eks:kubernetes-node-class-name": "*",
      "aws:RequestTag/eks:kubernetes-node-pool-name": "*"
    },
    "ForAllValues:StringLike": {
      "aws:TagKeys": [
        "eks:eks-cluster-name",
        "eks:kubernetes-node-class-name",
        "eks:kubernetes-node-pool-name",
        "kubernetes.io/cluster/*"
      ]
    }
  }
}