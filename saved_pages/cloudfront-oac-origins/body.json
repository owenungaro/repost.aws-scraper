{
  "body": "I want to configure Origin Access Control (OAC) for my Amazon CloudFront distributions that have Amazon Simple Storage Service (Amazon S3) bucket origins. I also want to migrate from Origin Access Identity (OAI) to OAC.\n\nShort description\nOAC and OAI are CloudFront security features that help you secure your Amazon S3 bucket origins. OAC and OAI restrict access to S3 buckets, and you can access only through the CloudFront distributions that you configure.\nNote:\nIt's a best practice to use OAC instead of OAI. For more information, see\nRestrict access to an Amazon S3 origin\n.\nResolution\nCreate OAC in the CloudFront console\nTo configure OAC for a CloudFront distribution with an Amazon S3 bucket origin, complete the following steps:\nOpen the\nCloudFront console\n.\nIn the navigation pane, expand\nSecurity\n, and then choose\nOrigin access\n.\nChoose\nCreate control setting\n.\nFrom the\nCreate new OAC\nform, complete the following:\nEnter a\nName\nfor the OAC.\n(Optional) Enter a\nDescription\nfor the OAC.\nFor\nSigning behavior\n, keep the default setting as\nSign requests (recommended)\n.\nChoose the\nOrigin type\ndropdown list, and choose\nS3\n.\nChoose\nCreate\n.\nFor more information, see\nCreate the origin access control\n.\nAdd the OAC to an S3 origin in a distribution\nComplete the following steps:\nOpen the\nCloudFront console\n.\nIn the navigation pane, choose\nDistributions\n, and then select the distribution with an S3 origin.\nChoose the\nOrigins\ntab, and then select the origin name that you want to add the OAC to.\nChoose\nEdit\n, and then choose\nOrigin access control settings (recommended)\n.\nChoose the\nOrigin access control dropdown\nlist, and then select the OAC that you created in the preceding section.\nChoose\nSave changes\n.\nUpdate the S3 bucket policy\nTo allow the CloudFront distribution to use OAC to access the S3 bucket, update the bucket policy:\nOpen the\nAmazon S3 console\n.\nIn the navigation pane, choose\nGeneral purpose buckets\n.\nChoose the S3 bucket, and then choose the\nPermissions\ntab.\nIn\nBucket policy\n, choose\nEdit\n.\nIn the\nPolicy edit statement\n, attach the following policy:\n{\n\"Version\": \"2012-10-17\",\n    \"Statement\": {\n        \"Sid\": \"AllowCloudFrontServicePrincipalReadOnly\",\n        \"Effect\": \"Allow\",\n        \"Principal\": {\n            \"Service\": \"cloudfront.amazonaws.com\"\n        },\n        \"Action\": \"s3:GetObject\",\n        \"Resource\": \"arn:aws:s3:::YOUR_BUCKET_NAME/*\",\n        \"Condition\": {\n            \"StringEquals\": {\n                \"AWS:SourceArn\": \"arn:aws:cloudfront::YOUR_AWS_ACCOUNT_ID:distribution/YOUR_DISTRIBUTION_ID\"\n            }\n        }\n    }\n}\nNote:\nReplace\nYOUR_BUCKET_NAME\n,\nYOUR_AWS_ACCOUNT_ID\n, and\nYOUR_DISTRIBUTION_ID\nwith your variables.\nChoose\nSave changes\n.\n(Optional) Migrate OAI to OAC\nIf you use OAI to restrict access to your S3 bucket origin and want to migrate to OAC, complete the following steps:\nFollow the steps in the\nCreate an OAC in the CloudFront console\nsection.\nOpen the\nAmazon S3 console\n.\nIn the navigation pane, choose\nGeneral purpose buckets\n.\nChoose the S3 bucket, and then choose the\nPermissions\ntab.\nIn\nBucket policy\n, choose\nEdit\n.\nIn the\nPolicy edit statement\n, attach the following policy:\n{\n\"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"AllowCloudFrontServicePrincipalReadOnly\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"Service\": \"cloudfront.amazonaws.com\"\n            },\n            \"Action\": \"s3:GetObject\",\n            \"Resource\": \"arn:aws:s3:::YOUR_BUCKET_NAME/*\",\n            \"Condition\": {\n                \"StringEquals\": {\n                    \"AWS:SourceArn\": \"arn:aws:cloudfront::YOUR_AWS_ACCOUNT_ID:distribution/YOUR_DISTRIBUTION_ID\"\n                }\n            }\n        },\n        {\n            \"Sid\": \"AllowLegacyOAIReadOnly\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"AWS\": \"arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity YOUR_ORIGIN_ACCESS_IDENTITY_ID\"\n            },\n            \"Action\": \"s3:GetObject\",\n            \"Resource\": \"arn:aws:s3:::YOUR_BUCKET_NAME/*\"\n        }\n    ]\n}\nNote:\nReplace\nYOUR_BUCKET_NAME\n,\nYOUR_AWS_ACCOUNT_ID\n,\nYOUR_DISTRIBUTION_ID\n, and\nYOUR_ORIGIN_ACCESS_IDENTITY_ID\nwith your variables.\nChoose\nSave changes\n.\nOpen the\nCloudFront console\n.\nIn the navigation pane, choose\nDistributions\n, and then select the distribution that you want to attach the OAC to.\nChoose the\nOrigins\ntab, choose your origins name, and then choose\nEdit\n.\nFor\nOrigin access\n, choose\nOrigin access control settings (recommended)\n.\nChoose the\nOrigin access control dropdown\nlist, and then select the OAC that you want to use.\nChoose\nSave changes\n.\nAfter the distribution is fully deployed, you can update the S3 bucket policy to remove the statement related to OAI.\nFor more information, see\nMigrating from origin access identity (OAI) to origin access control (OAC)\n.\nRelated information\nRestrict access to an Amazon S3 origin\nBlocking public access to your Amazon S3 storage"
}