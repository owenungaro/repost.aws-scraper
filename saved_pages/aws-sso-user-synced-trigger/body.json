{
  "body": "Im using aws SSO,\ni want a triggering mechanism to lambda whenever a new user is sunced to identity center.\ni will add the user to AD, within 40min it will appear in aws soo users.\nwhen it appears i want to trigger a lambda to create permission set.\nSo what the trigger i can use\n\nTo trigger a Lambda function when a new user is synced to AWS IAM Identity Center (formerly AWS SSO), you can use Amazon EventBridge (formerly CloudWatch Events) to monitor and respond to these events.\nYou can set up an EventBridge rule with a pattern that specifically targets user creation events in IAM Identity Center. Here's how you can configure it:\nCreate an EventBridge rule with the following event pattern:\n{\n\"source\": [\"aws.sso\"],\n\"detail-type\": [\"AWS API Call via CloudTrail\"],\n\"detail\": {\n\"eventSource\": [\"sso.amazonaws.com\", \"sso-directory.amazonaws.com\"],\n\"eventName\": [\"CreateUser\"]\n}\n}\nSet your Lambda function as the target for this EventBridge rule.\nEnsure that CloudTrail is properly configured to log these events.\nThis setup will trigger your Lambda function whenever a new user is created in IAM Identity Center, allowing you to programmatically create permission sets for the new user.\nNote that if you're using an external identity provider like Active Directory, the event will be generated when the user is synced to IAM Identity Center, not when you add the user to AD. The 40-minute sync delay you mentioned is the time it takes for AD changes to propagate to IAM Identity Center, and the EventBridge rule will trigger after this synchronization completes.\nAlso, be aware that if your identity source is configured as \"SCIM\" for automatic provisioning, user management happens through your external identity provider, and you'll need to ensure your EventBridge rule is properly capturing these provisioning events.\nSources\nNeed some help with my setting(EventBridge) | AWS re:Post\nAWS SSO - Manage Users | AWS re:Post"
}