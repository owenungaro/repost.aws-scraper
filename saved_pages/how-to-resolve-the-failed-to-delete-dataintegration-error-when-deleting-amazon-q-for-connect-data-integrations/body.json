{
  "body": "When attempting to delete Amazon Q data integrations in Connect, users may encounter the error \"Failed to delete DataIntegration with name: <>. An DataIntegration with DataIntegrationAssociations cannot be deleted.\" This article provides a step-by-step resolution using commands to run in AWS CLI or AWS CloudShell, as the Amazon Connect service currently doesn't provide console mechanisms to view or delete existing data integrations.\n\nRoot Causes\nThe \"Failed to delete DataIntegration\" error typically occurs due to two main reasons:\nThe data integration is actively associated with an Amazon Q domain in your Connect instance.\nThere are underlying or hidden association records that must be removed first.\nPrerequisites\nAWS CLI version 2.3 (or higher) installed locally, or access to AWS CloudShell.\nAWS credentials and the region configured in your environment.\nAppropriate IAM permissions to manage Connect and Q in Connect (Wisdom) resources.\nResolution Steps\nList Existing Data Integrations\nTo view all the existing data integrations , run the following command :\naws appintegrations list-data-integrations\nCheck Data Integration Associations\nTo view asociations for the target data integration , run :\naws appintegrations list-data-integration-associations --data-integration-identifier <DATA_INTEGRATION_NAME>\nIf you cannot find any data integration associations with your data integration, move to the next step in order to ensure there are no other associations existing with the Connect instance or in Q for Connect.\nReview Connect Instance Integrations\nTo list all the integrations associated with your Connect instance , run :\naws connect list-integration-associations --instance-id <CONNECT_INSTANCE_ID>\nNote down:\nIntegrationAssociationId\nfor \"WISDOM_KNOWLEDGE_BASE\" type\nIntegrationArn\nfor \"WISDOM_ASSISTANT\" type\nDelete Knowledge Base Integration\nIf WISDOM_KNOWLEDGE_BASE exists, run :\naws connect delete-integration-association --instance-id <CONNECT_INSTANCE_ID> --integration-association-id <WISDOM_KNOWLEDGE_BASE_IntegrationAssociationId>\nManage QConnect Assistant Associations\nList the assistant associations for the \"WISDOM_ASSISTANT\" :\naws qconnect list-assistant-associations --assistant-id <WISDOM_ASSISTANT_ID>\nNote\n:  Only input the id from the IntegrationARN value retrieved in step 3.\nClean Up any existing Assistant Associations\nDelete any found associations :\naws qconnect delete-assistant-association --assistant-id <assistantId> --assistant-association-id <assistantAssociationId>\nHandle Knowledge Base Resources\nList existing qconnect knowledge bases :\naws qconnect list-knowledge-bases\nDelete Related Knowledge Base\nRemove any knowledge base associated with your data integration :\naws qconnect delete-knowledge-base --knowledge-base-id <KNOWLEDGE_BASE_ID>\nVerify Association Removal\nConfirm data integration associations are removed :\naws appintegrations list-data-integration-associations --data-integration-identifier <DATA_INTEGRATION_NAME>\nDelete Data Integration\nFinally, delete the data integration :\naws appintegrations delete-data-integration --data-integration-identifier  <DATA_INTEGRATION_NAME>\nVerification\nAfter completing these steps, verify in the Amazon Connect console that the data integration has been successfully removed.\nImportant Notes\nAmazon Q in Connect Knowledge bases have a hard limit of 10 per region.\n'Data integrations per region' quota can be increased from the default value of 10 through Service Quotas console. It is possible to receive auto-approval for an increase request of upto 25.\nAs a best practice, ensure to back up or document the configurations and settings before deletion.\nThe provided CLI commands can also be run directly in AWS CloudShell within the AWS Management Console, provided the IAM role/user has the necessary permissions required to access it.\nRelated Documentation\nAWS CLI Installation Guide :\nhttps://docs.aws.amazon.com/cli/v1/userguide/cli-chap-install.html\nAmazon Connect AppIntegrations service quotas :\nhttps://docs.aws.amazon.com/connect/latest/adminguide/amazon-connect-service-limits.html#app-integration-quotas\nAmazon Q in Connect Service Quotas :\nhttps://docs.aws.amazon.com/connect/latest/adminguide/amazon-connect-service-limits.html#q-in-connect-quotas\nAmazon Connect CLI reference :\nhttps://awscli.amazonaws.com/v2/documentation/api/latest/reference/connect/index.html\nAmazon Connect Appintegrations CLI reference :\nhttps://awscli.amazonaws.com/v2/documentation/api/latest/reference/appintegrations/index.html\nAmazon Q in Connect CLI reference :\nhttps://awscli.amazonaws.com/v2/documentation/api/latest/reference/qconnect/index.html\nAWS CloudShell reference :\nhttps://docs.aws.amazon.com/cloudshell/latest/userguide/getting-started.html"
}