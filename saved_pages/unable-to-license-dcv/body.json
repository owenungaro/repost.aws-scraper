{
  "body": "Hello! I've just set up DCV on a Windows Server 2025 AMI. My SG has access to the internet via HTTPS, I've updated the appropriate role to have permissions to the dcv-license S3 bucket in my region (though I still get an Access Denied error when accessing via AWS Tools for Powershell...), I've installed EC2Launch v2 (even though this was a quick launch AMI), and I'm still getting a No License error when I connect. I'm not understanding why it's not working (especially with the \"Access Denied\" error and the tokens used with IMDSv2)), so any assistance would be greatly appreciated. Thank you!\n\nIt appears you're experiencing licensing issues with Amazon DCV on your Windows Server instance. Let me help troubleshoot this problem.\nWhen running Amazon DCV on an EC2 instance, you don't need a separate license server as DCV automatically detects it's running on EC2 and connects to an S3 bucket to verify license availability. However, several requirements must be met:\nYour instance must be able to reach the Amazon S3 endpoint. Since you mentioned your security group has HTTPS access to the internet, this should be covered. Alternatively, if internet access is restricted, you could configure a gateway VPC endpoint for your VPC with appropriate outbound rules.\nThe instance must have the correct IAM permissions. The IAM role attached to your EC2 instance needs an S3 access policy that looks like:\n{\n\"Version\": \"2012-10-17\",\n\"Statement\": [\n{\n\"Effect\": \"Allow\",\n\"Action\": \"s3:GetObject\",\n\"Resource\": \"arn:aws:s3:::dcv-license.YOUR-REGION/*\"\n}\n]\n}\nMake sure you've replaced \"YOUR-REGION\" with your actual AWS region.\nFor Windows instances specifically, access to the instance metadata service is required. You mentioned installing EC2Launch v2, which is good, but you might want to verify it's properly configured.\nThe \"Access Denied\" error when using AWS Tools for PowerShell suggests there might be an issue with the IAM permissions. Double-check that:\nThe IAM role is correctly attached to your instance\nThe policy has the correct region specified\nThere are no typos in the resource ARN\nIf you've verified all these settings and the issue persists, it's possible there might be a problem with the DCV license bucket in your specific region. Some newer AWS regions might not have the DCV license bucket fully set up yet.\nAs a troubleshooting step, you could try forcing a license reload with the command\ndcv reload-licenses\nrun as administrator.\nSources\nStep 2: License the Amazon DCV Server - Amazon DCV\nDCV - No license available from eu-south-2 region | AWS re:Post\nUpdating the production license - Amazon DCV"
}